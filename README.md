# Storage Monitoring & Admin Alerts (폐쇄망 환경)

## 📦 구성 파일

| 파일명 | 설명 |
|--------|-----|
| `storage_monitor.sh` | 스토리지 서버용 모니터링 스크립트<br>디스크 사용률, IO 성능, 메모리, 시스템 로드 체크<br>JSON 이벤트 파일로 공유 폴더 기록<br>Cron으로 5분마다 실행 |
| `StorageMonitor.ps1` | Windows 관리자 PC용 알림 클라이언트<br>공유 폴더 모니터링 및 Windows 토스트/팝업 알림<br>중복 알림 방지, 자동 실행 가능 |
| `storage_monitor_mac.sh` | macOS 관리자 PC용 알림 클라이언트<br>macOS 알림 센터 연동, 음성 알림, 대화상자 지원<br>LaunchAgent로 데몬 실행 가능 |

---

## 🔹 프로젝트 목표

- 관리자가 스토리지에 직접 접속하지 않아도 크리티컬 이벤트(디스크 용량, IO 지연 등)를 즉시 또는 주기적으로 확인 가능  
- 외부 인터넷 없이 내부망만으로 운영 가능  

---

## 🔹 아키텍처

1. **스토리지 (SAN/NAS)**  
   - 디스크 사용량, IO, 로그 등 상태 주기적 점검  
   - 크리티컬 조건 감지 (예: 사용률 85~90%, IO wait 심각)  
   - 이벤트를 JSON 파일로 기록

2. **공유 위치 / 파일 서버**  
   - 스토리지와 관리자 PC가 모두 접근 가능  
   - 이벤트 파일 저장 및 확인 매개체 역할

3. **관리자 PC**  
   - 공유 위치 주기적 확인  
   - 새 이벤트 발견 시 화면 팝업 알림  
     - Windows → PowerShell 팝업  
     - Mac → 알림 배너 / 음성 / 대화상자  
   - 외부 인터넷 불필요  

**동작 흐름:**  
스토리지 → 상태 점검 → 이벤트 감지 → 공유 위치/파일 기록 → 관리 PC → 새 이벤트 확인 → 화면 알림
---

## 🔹 구현 포인트

- 확인 주기: 1~5분 → 거의 실시간 알림  
- 중복 알림 방지: 이미 확인한 이벤트는 재표시하지 않음  
- 보고용 요약: 일일/주간 요약 리포트 생성 가능  
- 폐쇄망 환경: 외부 인터넷 없이 안전하게 운영  

---

## 🔹 리소스 부하

| 구성 요소 | 부하 수준 / 주의점 |
|-----------|-----------------|
| NAS/SAN 스토리지 | 주기적 모니터링은 CPU/메모리 소모 적음, 단 너무 짧은 주기나 대용량 디렉토리 조회 주의 |
| 공유 위치/파일 서버 | 이벤트 파일 읽기/쓰기 → 네트워크 I/O 소량, 영향 거의 없음 |
| 관리자 PC | 주기적 파일 확인 및 알림 → CPU/메모리 거의 사용 안 함 |

**결론:**  
- 주기 1~5분 정도면 실질적인 리소스 영향 거의 없음  
- 이벤트 파일 크기 최소화 + 체크 주기 합리적 설정 중요  

---

## 🔹 이벤트 파일 구조 (JSON 예시)

```json
{
  "timestamp": "2025-09-19T10:30:00",
  "severity": "CRITICAL",
  "type": "DISK_USAGE",
  "message": "Storage usage 92%",
  "source": "storage-01"
}
